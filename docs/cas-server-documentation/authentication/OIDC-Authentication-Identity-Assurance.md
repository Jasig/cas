---
layout: default
title: CAS - OpenID Connect Authentication
category: Protocols
---
{% include variables.html %}

# OpenID Connect - Identity Assurance

[Identity Assurance](https://openid.net/specs/openid-connect-4-identity-assurance-1_0.html) defines an extension to OpenID Connect 
for providing Relying Parties with verified claims, along with an explicit statement 
about the verification status of these claims (what, how, when, according to what rules, using what evidence). 
This specification is aimed at enabling use cases requiring strong assurance, for example, to comply with regulatory 
requirements such as Anti-Money Laundering laws or access to health data, risk mitigation, or fraud prevention.

## Identity Assurance Claims

CAS provides a special pre-defined built-in scope, `assurance` that carries special identity assurance claims. In order 
to fulfill the requirements of some jurisdictions on identity assurance, identity assurance defines the specific claims 
for conveying end-user data in addition to the Claims defined in the OpenID Connect specification. Such claims include
`nationalities`, `birth_family_name`, `birth_given_name`, `msisdn`, `place_of_birth` and more.

Allow a relying party to receive claims grouped by the `assurance` scope may be done as follows:

```json
{
  "@class" : "org.apereo.cas.services.OidcRegisteredService",
  "clientId": "...",
  "clientSecret": "...",
  "serviceId" : "...",
  "name": "OIDC",
  "id": 1,
  "scopes" : [ "java.util.HashSet", 
    [ "openid", "profile", "assurance" ]
  ]
}
```

## Identity Assurance Audits
 
ID tokens generated by CAS carry a special `txn` claim used in the context of identity assurance to build audit trails 
across the parties involved in an OpenID Connect transaction. CAS audit records maintain a corresponding audit trail
tied to the `txn` claim which at least consists of the following details:

- The transaction ID under `txn`
- The authentication method employed under `authn_methods`
- The generated ID token itself

<div class="alert alert-info"><strong>ID Token</strong><p>The generated ID token that shows up in the
CAS audit logs is NOT unpacked to display and/or log claims in plain-text mode. The ID token is displayed as-is,
and may be signed and or encrypted depending on the relying party configuration.</p></div>
