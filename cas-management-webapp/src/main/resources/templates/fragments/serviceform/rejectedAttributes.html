<!-- Rejected Attributes Table-->

<div class="form-group">
    <label for="unauthorizedRedirectUrl" class="col-sm-12" th:inline="text">
        [[#{services.form.label.sas.rejectedattributes}]]
        <i class="fa fa-lg fa-question-circle form-tooltip-icon no-float"
           data-toggle="tooltip"
           data-placement="top"
           th:title="#{services.form.tooltip.sas.rejectedattributes}"></i>
    </label>
</div>

<div id="rejectedAttributes" ng-controller="rejectedAttributesController as rejAttr" class="panel panel-default">
<!--<div class="form-group">-->
    <!--<div class="panel panel-default">-->
    <!--<div class="col-sm-12">-->
        <!-- Todo: add table -->

        <table ng-table="rejAttr.tableParams"
               class="table table-striped table-responsive table-condensed editable-table" show-filter="false">
            <colgroup>
                <col width="45%"/>
                <col width="45%"/>
                <col width="10%"/>
            </colgroup>
            <tr ng-repeat="row in $data">
                <!--
                Todo: Look into custom table header template and pass in the messages.properties attributes.
                      note: the value in the messages.properties file MUST HAVE single quotes around it.
                -->
                <td th:title="#{services.form.label.sas.rejectedattributes.name}"
                    ng-switch="row.isEditing"
                    ng-class="name.$dirty ? 'bg-warning' : ''"
                    ng-form="name">
                    <span ng-switch-default="ng-switch-default" class="editable-text">{{row.name}}</span>
                    <div class="controls"
                         ng-class="name.$invalid &amp;&amp; name.$dirty ? 'has-error' : ''"
                         ng-switch-when="true">
                            <input class="form-control noresize editable-text"
                                      ng-model="row.name"></input>
                    </div>
                </td>
                <td th:title="#{services.form.label.sas.rejectedattributes.value}"
                    ng-switch="row.isEditing"
                    ng-class="propValue.$dirty ? 'bg-warning' : ''"
                    ng-form="propValue">
                    <span ng-switch-default="ng-switch-default" class="editable-text">{{row.propValue}}</span>
                    <div class="controls"
                         ng-class="propValue.$invalid &amp;&amp; propValue.$dirty ? 'has-error' : ''"
                         ng-switch-when="true">
                            <input class="form-control noresize editable-text"
                                      ng-model="row.propValue"></input>
                    </div>
                </td>
                <td>
                    <button class="btn btn-primary btn-sm" ng-click="rejAttr.save(row, rowForm)"
                            ng-if="row.isEditing" ng-disabled="rowForm.$pristine || rowForm.$invalid"><span
                            class="glyphicon glyphicon-ok"></span></button>
                    <button class="btn btn-default btn-sm" ng-click="rejAttr.cancel(row, rowForm)"
                            ng-if="row.isEditing"><span class="glyphicon glyphicon-remove"></span></button>
                    <button class="btn btn-default btn-sm" ng-click="row.isEditing = true" ng-if="!row.isEditing">
                        <span class="glyphicon glyphicon-pencil"></span></button>
                    <button class="btn btn-danger btn-sm" ng-click="rejAttr.del(row)" ng-if="!row.isEditing"><span
                            class="glyphicon glyphicon-trash"></span></button>
                </td>
            </tr>
            <tr ng-show="row.isAdding">
                <td><input class="form-control noresize editable-text" placeholder="New property name"
                              ng-model="row.propValue"></input></td>
                <td><input class="form-control noresize editable-text" placeholder="New property value"
                              ng-model="row.propValue"></input></td>
                <td>
                    <button class="btn btn-success btn-sm"
                            ng-click=""
                            ng-if="row.isAdding" ng-disabled="">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                    <!-- Todo: change this so it calls a method to reset the form -->
                    <button class="btn btn-default btn-sm"
                            ng-click="row.isAdding=false">
                        <span class="glyphicon glyphicon-remove"></span>
                    </button>
                </td>
            </tr>
            <tr class="addRow" ng-show="!row.isAdding">
                <td>
                    <button class="btn btn-default btn-sm" ng-click="row.isAdding = true" >
                        <span class="glyphicon glyphicon-plus text-success"></span>
                    </button>
                </td>
                <td></td>
                <td></td>
            </tr>
        </table>
    <!--</div>-->
        <!--</div>-->
</div>
